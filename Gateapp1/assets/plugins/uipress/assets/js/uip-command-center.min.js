const uipCommandOptions={data:()=>({loading:!0,screenWidth:window.innerWidth,translations:uipTranslations,masterPrefs:uipMasterPrefs,defaults:uipDefaults,userPreferences:uipUserPrefs,uipToolbar:"",floatingActive:!1}),watch:{},created:function(){window.addEventListener("resize",this.getScreenWidth)},computed:{},methods:{},template:'<command-search :defaults="defaults" :options="masterPrefs" :translations="translations" :preferences="userPreferences"></command-search>'},uipCommand=uipVue.createApp(uipCommandOptions);uipCommand.component("command-search",{props:{defaults:Object,options:Object,translations:Object,preferences:Object},data:function(){return{loading:!0,floating:!1,quickActions:[],fetchQuickAactions:!1,os:"mac",search:{open:!1,term:"",perPage:20,currentPage:1,results:[],totalFound:0,categorized:[],nothingFound:!1,searching:!1,activeIndex:0},contextual:{open:!1,actions:[],item:[]}}},mounted:function(){this.loading=!1;let e=this;navigator.platform.toUpperCase().indexOf("MAC")>=0||(e.os="pc"),window.addEventListener("keydown",function(i){if(e.search.open&&(68==i.keyCode&&(i.ctrlKey||i.metaKey)&&(i.preventDefault(),e.searchDirectory()),e.handleArrowKeys(i),13==i.keyCode)){let i=e.search.categorized[e.search.activeIndex];if(e.search.nothingFound)return void e.searchDirectory();e.contextual.open?e.handleContextualAction(e.search.activeIndex):"quickAction"==i.type?e.handleQuickAaction(e.search.activeIndex):"menu"==i.type?e.handleMenuAaction(e.search.activeIndex):e.handleContextual(e.search.activeIndex)}75==i.keyCode&&(i.ctrlKey||i.metaKey)&&(i.preventDefault(),e.search.open?e.search.open=!1:e.openThisComponent()),"Escape"==i.key&&(e.contextual.open?e.contextual.open=!1:e.search.open=!1),e.contextual.open&&(69==i.keyCode&&(i.ctrlKey||i.metaKey)&&e.openThisComponent(),79==i.keyCode&&(i.ctrlKey||i.metaKey)&&e.openThisComponent())})},watch:{"search.term":function(e,i){e!=i&&this.masterSearch()}},computed:{searchedCats(){return this.search.categorized}},methods:{handleArrowKeys(e){let i=this,t=i.search.categorized.length;if(i.contextual.open&&(t=i.contextual.actions.length),37==e.keyCode&&(i.contextual.open=!1),40==e.keyCode&&i.search.activeIndex!=t-1){i.search.activeIndex+=1,document.getElementById("found-item-"+i.search.activeIndex).scrollIntoView(!1,{behavior:"smooth"})}if(38==e.keyCode&&i.search.activeIndex>0){i.search.activeIndex=i.search.activeIndex-1,document.getElementById("found-item-"+i.search.activeIndex).scrollIntoView(!1,{behavior:"smooth"})}},handleContextualAction(e){let i=this,t=i.contextual.actions[e];if("link"==t.type&&document.getElementById("uip-contextual-link-"+e).click(),"action"==t.type){if("delete"==t.action){if(!confirm(i.translations.confirmDelete))return;i.deleteItem()}if("duplicate"==t.action){if(!confirm(i.translations.confirmCopy))return;i.copyItem()}"deactivate_plugin"!=t.action&&"activate_plugin"!=t.action&&"delete_plugin"!=t.action&&"upgrade_plugin"!=t.action&&"install_plugin"!=t.action||i.modifyPluginStatus(t.action)}},modifyPluginStatus(e){let i=this,t=i.contextual.item;("delete_plugin"!=e||confirm(i.translations.confirmPluginDelete))&&(i.search.searching=!0,jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_modify_plugin_status",security:uip_ajax.security,item:t,plugin_action:e},success:function(a){if(i.search.searching=!1,a){if("upgrade_plugin"==e)try{data=JSON.parse(a),data.error&&uipNotification(data.message,"danger")}catch(e){return uipNotification(i.translations.pluginUpdated,"danger"),void i.setContextual(t)}data=JSON.parse(a),data.error?uipNotification(data.message,"danger"):(uipNotification(data.message,"success"),"delete_plugin"!=e?i.setContextual(t):(i.masterSearch(),i.contextual.open=!1))}}}))},searchDirectory(){let e=this,i=this.search.term;i=i.toLowerCase(),e.search.searching=!0,jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_search_wp_directory",security:uip_ajax.security,term:i},success:function(i){i&&(data=JSON.parse(i),e.search.searching=!1,data.error?uipNotification(data.message,"danger"):(data.plugins.length>0&&(e.search.categorized=data.plugins,e.search.nothingFound=!1),uipNotification(data.message,"success")))}})},deleteItem(){let e=this,i=e.contextual.item;jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_delete_item_from_command",security:uip_ajax.security,id:i.id},success:function(i){i&&(data=JSON.parse(i),data.error?uipNotification(data.message,"danger"):(uipNotification(data.message,"success"),e.masterSearch(),e.contextual.open=!1))}})},copyItem(){let e=this,i=e.contextual.item;jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_duplicate_item_from_command",security:uip_ajax.security,id:i.id},success:function(i){i&&(data=JSON.parse(i),data.error?uipNotification(data.message,"danger"):(uipNotification(data.message,"success"),e.masterSearch(),e.contextual.open=!1))}})},handleQuickAaction(e){let i=this,t=i.search.categorized[e];"link"==t.actionType&&document.getElementById("uip-quick-link-"+e).click(),"function"==t.actionType&&("darkmode"==t.function&&(i.uip_save_preferences("darkmode",!0,!1),jQuery("html").attr("data-theme","dark")),"lightmode"==t.function&&(i.uip_save_preferences("darkmode",!1,!1),jQuery("html").attr("data-theme","light")))},handleMenuAaction(e){this.search.categorized[e];document.getElementById("uip-menu-link-"+e).click()},handleContextual(e){let i=this.search.categorized[e];this.setContextual(i),this.contextual.open=!0},uip_save_preferences(e,i,t){""!=e&&jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_save_user_prefs",security:uip_ajax.security,pref:e,value:i},success:function(e){e&&(data=JSON.parse(e),data.error||1!=t&&uipNotification(data.message,"success"))}})},setContextual(e){let i=this;i.search.searching=!0,i.contextual.item=e;let t=!1;-1!=navigator.userAgent.indexOf("Mac OS X")&&(t=!0),jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_get_contextual",security:uip_ajax.security,item:e,mac:t},success:function(t){try{data=JSON.parse(t)}catch(t){return void i.setContextual(e)}data=JSON.parse(t),data.error?uipNotification(data.error_message,"danger"):(i.contextual.actions=data.actions,i.contextual.open=!0,i.search.activeIndex=0),i.search.searching=!1}})},openThisComponent(){let e=this;e.getQuickActions(),e.search.open=!0,e.$nextTick(()=>{e.$refs.uipsearchsite.focus()}),document.documentElement.addEventListener("click",this.onClickOutside,!1),e.search.activeIndex=0},onClickOutside(e){let i=this;e.target.classList.contains("uip-search-closer")&&(i.search.open=!1)},getQuickActions(){let e=this;e.fetchQuickAactions||jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_get_quick_actions",security:uip_ajax.security},success:function(i){data=JSON.parse(i),data.error?uipNotification(data.error_message,"danger"):(e.search.categorized=data.actions,e.quickActions=data.actions,e.fetchQuickAactions=!0,e.search.activeIndex=0)}})},masterSearch(){if(this.search.searching)return;let e=this;e.search.searching=!0;let i=this.search.term;if(""==i)return e.search.categorized=e.quickActions,e.search.searching=!1,void(e.search.nothingFound=!1);i=i.toLowerCase(),perpage=this.search.perPage,currentpage=this.search.currentPage,this.search.loading=!0,this.search.nothingFound=!1,jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_site_global_search",security:uip_ajax.security,search:i,perpage:perpage,currentpage:currentpage},success:function(i){if(e.search.loading=!1,e.search.searching=!1,i)if(data=JSON.parse(i),data.error)uipNotification(data.error_message,"danger");else{if(e.search.results=data.founditems,e.search.totalPages=data.totalpages,e.search.totalFound=data.totalfound,e.search.categorized=data.categorized,e.search.activeIndex=0,e.search.categorized.length<1)return void(e.search.nothingFound=!0);e.search.currentPage>data.totalpages&&(e.search.currentPage=1)}}})},loadMoreResults(){perpage=this.search.perPage,this.search.perPage=Math.floor(3*perpage),this.masterSearch()},openSearch(){document.activeElement&&document.activeElement.blur(),this.search.open=!0},closeSearch(){document.activeElement&&document.activeElement.blur(),this.search.open=!1},isEnabled(){return search=this.options.toolbar.options["search-disabled"].value,"true"!=search&&!0!==search},setTarget:e=>e.newtab?"_blank":"_self"},template:'<div v-show="search.open" class="uip-position-fixed uip-left-0 uip-right-0 uip-top-0 uip-bottom-0 uip-flex uip-flex-center uip-flex-middle uip-search-closer uip-body-font uip-z-index-9999" ref="dropouter" style="font-size:13px;line-height:1">      <div class="uip-shadow-large uip-h-420 uip-max-h-100p uip-w-600 uip-max-w-100p uip-background-default  uip-border-round" ref="dropinner uip-overflow-visible">        <div class="uip-flex uip-flex-column uip-h-100p uip-max-h-100p">          \x3c!-- SEARCH --\x3e          <div class="">            <div class="uip-margin-bottom- uip-padding-s uip-border-bottom ">              <div class="uip-flex uip-flex-center">                <span class="uip-margin-right-xs uip-text-muted">                  <span class="material-icons-outlined">search</span>                </span>                 <input type="text" :placeholder="translations.search" class="uip-blank-input uip-flex-grow"                 @change="masterSearch()" style="color: var(--uip-text-color-normal)"                v-model="search.term" ref="uipsearchsite">                <div class="uip-flex uip-flex-center uip-gap-xxxs uip-text-muted">                  <span style="font-size:1em" v-if="os == \'mac\'" class="uip-border-round uip-border uip-padding-left-xxs uip-padding-right-xxs uip-background-muted">cmd</span>                  <span style="font-size:1em" v-if="os == \'pc\'" class="uip-border-round uip-border uip-padding-left-xxs uip-padding-right-xxs uip-background-muted">ctrl</span>                  <span style="font-size:1em" class="uip-border-round uip-border uip-padding-left-xxs uip-padding-right-xxs uip-background-muted uip-margin-right-xxs">d</span>                  <span>{{translations.forceSearchDirectory}}</span>                </div>              </div>            </div>          </div>          <div class="uip-overflow-auto uip-scrollbar" style="flex: 1">            <div class=" uip-max-h-100p">              <div class="uip-h-2 uip-w-100p">                <div class="uip-loading-box" v-if="search.searching">                  <div class="uip-loader"></div>                </div>              </div>              \x3c!-- SEARCH RESULTS --\x3e              <div class="uip-padding-xs" v-if="!contextual.open">                <div v-if="search.nothingFound" class="uip-flex uip-flex-middle uip-flex-center uip-h-150 uip-flex-column uip-row-gap-s">                  <div class="uip-text-muted">{{translations.searchDirectory}}</div>                  <button class="uip-button-default uip-flex uip-gap-xxs" @click="searchDirectory()">                    <span>Search</span>                     <span class="material-icons-outlined uip-border-round uip-border uip-padding-left-xxs uip-padding-right-xxs" style="font-size:1em">keyboard_return</span>                  </button>                </div>                <template v-for="(item, index) in search.categorized" >                  <div v-if="item.type == \'quickAction\'"  @mouseover="search.activeIndex = index" :class="{\'uip-background-muted\' : index == search.activeIndex }"                  :id="\'found-item-\' + index"                  class="uip-padding-xs uip-border-round uip-cursor-pointer">                    <div @click="handleQuickAaction(index)" class="uip-flex uip-gap-xs uip-flex-center uip-text-normal">                      <div class="material-icons-outlined" v-html="item.icon"></div>                      <div class=" uip-text-emphasis" v-html="item.title"></div>                      <div class="material-icons-outlined uip-flex-grow uip-text-right">bolt</div>                    </div>                    <a v-if="item.actionType == \'link\'" :href="item.link" :id="\'uip-quick-link-\' + index"></a>                  </div>                  <div v-else-if="item.type == \'menu\'" @mouseover="search.activeIndex = index" :class="{\'uip-background-muted\' : index == search.activeIndex }"                  :id="\'found-item-\' + index" @click="handleMenuAaction(index)"                  class="uip-padding-xs uip-border-round uip-cursor-pointer">                    <div class="uip-flex uip-gap-xs uip-flex-center uip-text-normal">                      <div class="material-icons-outlined">menu</div>                      <div class="uip-flex uip-gap-xxs uip-flex-center">                        <div class="uip-background-primary-wash uip-border-round uip-padding-xxs uip-text-bold uip-text-s uip-text-capitalize " v-html="item.type"></div>                        <div class="material-icons-outlined">chevron_right</div>                        <div v-if="item.parentItem" class="uip-background-primary-wash uip-border-round uip-padding-xxs uip-text-bold uip-text-s" v-html="item.parentItem"></div>                        <div v-if="item.parentItem" class="material-icons-outlined">chevron_right</div>                        <div class="uip-text-bold uip-text-emphasis" v-html="item.name"></div>                      </div>                    </div>                    <a :href="item.url" :id="\'uip-menu-link-\' + index"></a>                  </div>                  <div v-else-if="item.type == \'plugin\'" @mouseover="search.activeIndex = index" :class="{\'uip-background-muted\' : index == search.activeIndex }"                  :id="\'found-item-\' + index" @click="handleContextual(index)"                  class="uip-padding-xs uip-border-round uip-cursor-pointer">                    <div class="uip-flex uip-gap-xs uip-flex-center uip-text-normal">                      <div class="material-icons-outlined">extension</div>                      <div class="uip-flex uip-gap-xxs uip-flex-center">                        <div class="uip-background-primary-wash uip-border-round uip-padding-xxs uip-text-bold uip-text-s">{{item.type}}</div>                        <div class="material-icons-outlined">chevron_right</div>                        <div class="uip-text-bold uip-text-emphasis" v-html="item.Name"></div>                      </div>                    </div>                  </div>                  <div v-else @mouseover="search.activeIndex = index" :class="{\'uip-background-muted\' : index == search.activeIndex }"                  :id="\'found-item-\' + index" @click="handleContextual(index)"                  class="uip-padding-xs uip-border-round uip-cursor-pointer">                    <div class="uip-flex uip-gap-xs uip-flex-center uip-text-normal">                      <div class="material-icons-outlined">save</div>                      <div class="uip-flex uip-gap-xxs uip-flex-center">                        <div class="uip-background-primary-wash uip-border-round uip-padding-xxs uip-padding-right-xxs uip-text-bold uip-text-s">{{item.type}}</div>                        <div class="material-icons-outlined">chevron_right</div>                        <div class="uip-text-bold uip-text-emphasis" v-html="item.name"></div>                      </div>                    </div>                  </div>                </template>              </div>              \x3c!-- CONTEXTUAL RESULTS --\x3e              <div class="uip-padding-xs" v-if="contextual.open">                \x3c!--META --\x3e                <div class="uip-flex uip-gap-xs uip-flex-center uip-margin-bottom-s">                  <div class="material-icons-outlined uip-cursor-pointer" style="font-size:2.5em" @click="contextual.open = false">chevron_left</div>                  <div class="" v-if="contextual.item.image">                    <img :src="contextual.item.image" class="uip-border-round uip-w-38">                  </div>                  <div class="">                    <div class="uip-text-bold uip-text-emphasis uip-margin-bottom-xxs" v-html="contextual.item.name"></div>                    <div class="uip-text-muted" v-html="contextual.item.author"></div>                  </div>                </div>                \x3c!--DESCRIPTION--\x3e                <div v-if="contextual.item.shortDes" class="uip-text-muted uip-padding-xs uip-margin-bottom-s">{{contextual.item.shortDes}}</div>                \x3c!--ACTIONS--\x3e                <template v-for="(item, index) in contextual.actions" >                  <div @mouseover="search.activeIndex = index" :class="{\'uip-background-muted\' : index == search.activeIndex }" @click="handleContextualAction(index)"                  :id="\'found-item-\' + index"                  class="uip-padding-xs uip-border-round uip-cursor-pointer">                    <div class="uip-flex uip-gap-xs uip-flex-center uip-text-normal">                      <div class="material-icons-outlined" v-html="item.icon"></div>                      <div class="" v-html="item.title"></div>                    </div>                    <a v-if="item.type == \'link\'" :target="setTarget(item)" :href="item.url" :id="\'uip-contextual-link-\' + index"></a>                  </div>                </template>              </div>            </div>          </div>          \x3c!-- LOAD MORE --\x3e          <div class="uip-border-top uip-padding-xs uip-padding-left-s uip-flex uip-gap-s uip-flex-center uip-text-muted">            <div class="uip-flex uip-flex-center uip-gap-xs">              <span style="font-size:1em" class="material-icons-outlined uip-border-round uip-border uip-padding-left-xxs uip-padding-right-xxs uip-background-muted">swap_vert</span>              <span>{{translations.toNavigate}}</span>            </div>            <div class="uip-flex uip-flex-center uip-gap-xs">              <span style="font-size:1em" class="material-icons-outlined uip-border-round uip-border uip-padding-left-xxs uip-padding-right-xxs uip-background-muted">keyboard_return</span>              <span>{{translations.toSelect}}</span>            </div>            <div class="uip-flex uip-flex-center uip-gap-xs">              <span style="font-size:1em" class="uip-border-round uip-border uip-padding-left-xxs uip-padding-right-xxs uip-background-muted">esc</span>              <span>{{translations.toClose}}</span>            </div>            <div class="uip-text-muted uip-text-s uip-flex-grow uip-text-right" v-if="search.totalPages > 1" >              <span>{{search.totalFound}}</span>              <span>{{translations.totalFound}}</span>            </div>          </div>        </div>      </div>    </div>'}),uipCommand.component("feature-flag",{props:{translations:Object},data:function(){return{loading:!0}},mounted:function(){},methods:{},template:'<span class="uip-padding-xxs uip-border-round uip-background-orange uip-text-bold uip-text-white uip-flex">\t  <span class="material-icons-outlined uip-margin-right-xs">\t  \tcard_giftcard\t  </span>  \t  <span>\t\t{{translations.preFeature}}\t  </span>  \t</span>'}),uipCommand.component("loading-placeholder",{props:{settings:Object},data:function(){return{loading:!0}},mounted:function(){this.loading=!1},methods:{},template:'<svg role="img" width="400" height="200" style="width:100%" aria-labelledby="loading-aria" viewBox="0 0 400 200" preserveAspectRatio="none">      <title id="loading-aria">Loading...</title>      <rect x="0" y="0" width="100%" height="100%" clip-path="url(#clip-path)" style=\'fill: url("#fill");\'></rect>      <defs>        <clipPath id="clip-path">          <rect x="0" y="18" rx="2" ry="2" width="211" height="16" />          <rect x="0" y="47" rx="2" ry="2" width="120" height="16" />          <rect x="279" y="47" rx="2" ry="2" width="120" height="16" />          <rect x="0" y="94" rx="2" ry="2" width="211" height="16" />          <rect x="0" y="123" rx="2" ry="2" width="120" height="16" />          <rect x="279" y="123" rx="2" ry="2" width="120" height="16" />          <rect x="0" y="173" rx="2" ry="2" width="211" height="16" />          <rect x="0" y="202" rx="2" ry="2" width="120" height="16" />          <rect x="279" y="202" rx="2" ry="2" width="120" height="16" />        </clipPath>        <linearGradient id="fill">          <stop offset="0.599964" stop-color="#bbbbbb2e" stop-opacity="1">            <animate attributeName="offset" values="-2; -2; 1" keyTimes="0; 0.25; 1" dur="2s" repeatCount="indefinite"></animate>          </stop>          <stop offset="1.59996" stop-color="#bbbbbb2e" stop-opacity="1">            <animate attributeName="offset" values="-1; -1; 2" keyTimes="0; 0.25; 1" dur="2s" repeatCount="indefinite"></animate>          </stop>          <stop offset="2.59996" stop-color="#bbbbbb2e" stop-opacity="1">            <animate attributeName="offset" values="0; 0; 3" keyTimes="0; 0.25; 1" dur="2s" repeatCount="indefinite"></animate>          </stop>        </linearGradient>      </defs>  </svg>'}),uipCommand.mount("#uip-command-center");