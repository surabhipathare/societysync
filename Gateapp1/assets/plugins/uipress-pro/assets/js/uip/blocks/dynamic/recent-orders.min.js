const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{display:String,name:String,block:Object},data:function(){return{searchString:"",results:[],page:1,totalPages:0,perPage:this.block.settings.block.options.postsPerPage.value,postTypes:["shop_order"],limitToAuthor:!1,loading:!1,strings:{nothingFound:__("No posts found","uipress-lite"),by:__("By","uipress-lite"),order:__("Order","uipress-lite"),status:__("Status","uipress-lite"),total:__("Total","uipress-lite"),searchOrders:__("Search orders","uipress-lite")},searching:!1}},inject:["uipData","uipress","uiTemplate"],mounted:function(){this.getPosts()},watch:{page:{handler(t,e){""!=t&&this.getPosts()},deep:!0},perPage:{handler(t,e){this.getPosts()},deep:!0},searchString:{handler(t,e){1!=this.page?this.page=1:this.getPosts()},deep:!0},"block.settings.block.options.postsPerPage.value":{handler(t,e){this.getPosts()},deep:!0}},computed:{returnPerPage(){return this.block.settings.block.options.postsPerPage.value},hasSearch(){return this.uipress.get_block_option(this.block,"block","hideSearch")}},methods:{getPosts(){let t=this;if(t.loading)return;t.loading=!0;let e=new FormData;e.append("action","uip_get_recent_orders"),e.append("security",uip_ajax.security),e.append("search",t.searchString),e.append("page",t.page),e.append("perPage",t.returnPerPage),e.append("searchString",t.searchString),t.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{e.error&&(t.uipress.notify(e.message,"","error",!0),t.searching=!1,t.loading=!1),e.success&&(t.loading=!1,t.results=e.posts,t.totalPages=e.totalPages,console.log(e))})},goBack(){this.page>1&&(this.page=this.page-1)},goForward(){this.page<this.totalPages&&(this.page=this.page+1)},returnStatusBG:t=>"completed"==t?"uip-background-primary-wash":"processing"==t?"uip-background-green-wash":"failed"==t?"uip-background-red-wash":"uip-background-orange-wash"},template:'\n\t\t\t<div :class="block.settings.advanced.options.classes.value" class="uip-flex uip-flex-column uip-row-gap-s" :id="block.uid">\n\t\t\t  <div class="uip-flex uip-flex-column uip-row-gap-xs uip-list-area">\n\t\t\t  \n\t\t\t  \n\t\t\t  \t<div v-if="!hasSearch" class="uip-flex uip-padding-xxs uip-border uip-search-block uip-border-round uip-margin-bottom-s">\n\t\t\t\t\t  <span class="uip-icon uip-text-muted uip-margin-right-xs uip-text-l uip-icon uip-icon-medium">search</span>\n\t\t\t\t\t  <input class="uip-blank-input uip-flex-grow uip-text-s" type="search" :placeholder="strings.searchOrders" v-model="searchString">\n\t\t\t\t</div>\n\t\t\t\t  \n\t\t\t\t  \n\t\t\t\t<div v-if="loading" class="uip-flex uip-flex-center uip-flex-middle uip-padding-m"><loading-chart></loading-chart></div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t<div v-if="!loading" class="uip-max-w-100p uip-overflow-auto uip-scrollbar">\n\t\t\t\t\t<table class="uip-min-w-250 uip-w-100p uip-table">\n\t\t\t\t\t  <thead>\n\t\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t  <th class="uip-text-muted uip-text-weight-normal uip-text-left uip-padding-bottom-xxs">{{strings.order}}</th>\n\t\t\t\t\t\t  <th class="uip-text-muted uip-text-weight-normal uip-text-right uip-padding-bottom-xxs">{{strings.status}}</th>\n\t\t\t\t\t\t  <th class="uip-text-right uip-text-muted uip-text-weight-normal uip-padding-bottom-xxs">{{strings.total}}</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t  </thead>\n\t\t\t\t\t  <tbody>\n\t\t\t\t\t\t<tr v-for="item in results">\n\t\t\t\t\t\t  <td class="uip-text-bold uip-padding-bottom-xxs"><a class="uip-link-default uip-no-underline" :href="item.editLink">{{item.name}}</a></td>\n\t\t\t\t\t\t  \n\t\t\t\t\t\t  <td class="uip-text-right uip-padding-bottom-xxs uip-flex uip-flex-right">\n\t\t\t\t\t\t  \t<div class="uip-text-s uip-border-round uip-padding-xxxs uip-post-type-label" :class="returnStatusBG(item.status)">{{item.status}}</div>\n\t\t\t\t\t\t  </td>\n\t\t\t\t\t\t  \n\t\t\t\t\t\t  <td class="uip-text-right uip-padding-bottom-xxs">\n\t\t\t\t\t\t\t<div class=" uip-background-orange-wash uip-border-round uip-padding-xxxs uip-post-type-label uip-flex uip-gap-xxs uip-flex-center uip-text-bold uip-tag-label uip-inline-flex">\n\t\t\t\t\t\t\t  <span class="" v-html="item.total"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t  </td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t  </tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t<div v-if="results.length == 0 && searchString.length > 0" class="uip-text-muted uip-text-s">\n\t\t\t\t  {{strings.nothingFound}}\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t  <div class="uip-flex uip-gap-xs" v-if="totalPages > 1">\n\t\t\t\t<button @click="goBack" class="uip-button-default uip-icon uip-nav-button">chevron_left</button>\n\t\t\t\t<button @click="goForward" v-if="page < totalPages" class="uip-button-default uip-icon uip-nav-button">chevron_right</button>\n\t\t\t  </div>\n\t\t\t</div>'}};