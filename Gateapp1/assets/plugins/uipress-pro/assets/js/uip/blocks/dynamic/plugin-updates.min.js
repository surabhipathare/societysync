const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{display:String,name:String,block:Object,contextualData:Object},data:function(){return{loading:!0,updates:[],wpVersion:this.uipData.dynamicOptions.wpversion.value,strings:{placeholder:__("Input placeholder...","uipress-pro"),update:__("Update","uipress-pro"),details:__("Details","uipress-pro"),newVersion:__("New verasion","uipress-pro"),watchOut:__("Watch out","uipress-pro"),watchOutDescription:__("This plugin has not been tested with your platform version","uipress-pro"),noPluginUpdates:__("Plugins are all up to date","uipress-pro")}}},watch:{},inject:["uipData","uipress"],mounted:function(){this.getPluginupdates()},computed:{returnPlaceHolder(){let i=this.uipress.get_block_option(this.block,"block","inputPlaceHolder",!0);return i?this.uipress.isObject(i)?"string"in i?i.string:"":i:""},returnUpdates(){return this.updates},limitToAuthor(){return this.uipress.get_block_option(this.block,"block","limitToAuthor",!0)}},methods:{returnClasses(){let i="";return i+=this.uipress.get_block_option(this.block,"advanced","classes")},getPluginupdates(){let i=this,e=new FormData;e.append("action","uip_get_plugin_updates"),e.append("security",uip_ajax.security),i.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{e.error?i.uipress.notify(e.message,"","error",!0):(i.loading=!1,i.updates=e.updates)})},updatePlugin(i){let e=this;i[0].loading=!0;i[0].update.slug;let n=new FormData;n.append("action","uip_update_plugin"),n.append("security",uip_ajax.security),n.append("slug",i[1]),e.uipress.callServer(uip_ajax.ajax_url,n,!0).then(n=>{n.error||(delete e.updates[i[1]],i[0].loading=!0,e.uipress.notify(__("Success","uipress-pro"),i[0].Title+" "+__("was succesfully updated","uipress-pro"),"success",!0))})},returnIcon:i=>"icons"in i&&("1x"in i.icons&&i.icons["1x"])},template:'\n      <div class="" ref="uipmedialibrary" :id="block.uid" :class="returnClasses()">\n        <div v-if="loading" class="uip-padding-m uip-flex uip-flex-center uip-flex-middle"><loading-chart></loading-chart></div>\n        <div v-else class="uip-grid-col-4 uip-grid-min-width-medium uip-grid-gap-m">\n        \n          <div class="uip-flex uip-flex-center uip-gap-xs uip-text-muted" v-if="returnUpdates.length < 1">\n            <span class="uip-icon">check_circle</span>\n            <span>{{strings.noPluginUpdates}}</span>          </div>        \n          <component is="style" scoped>\n            .plugin-list-enter-active,\n            .plugin-list-leave-active {\n              transition: all 0.5s ease;\n            }\n            .plugin-list-enter-from,\n            .plugin-list-leave-to {\n              opacity: 0;\n              transform: translateX(30px);\n            }\n          </component>\n        \n          <TransitionGroup name="plugin-list">\n          \n            <div v-for="(item, index) in returnUpdates" class="uip-flex uip-flex-column uip-row-gap-xs uip-border-round " :key="item.Title">\n              <div class="uip-flex uip-flex-row uip-gap-s uip-flex-no-wrap uip-flex-center uip-cursor-pointer" @click="item.open = !item.open">\n              \n                <img v-if="returnIcon(item.update)" :src="returnIcon(item.update)" class="uip-border uip-border-circle uip-w-28 uip-ratio-1-1"> \n                <div v-else  class="uip-border uip-border-circle uip-w-28 uip-ratio-1-1 uip-background-primary"> </div>\n                \n                <div class=" uip-flex-grow">\n                  <div class="uip-text-emphasis uip-line-height-1" >{{item.Title}}</div>\n                  <a class="uip-text-muted uip-text-s uip-link-muted uip-no-underline" :href="item.PluginURI" target="_BLANK">{{item.Author}}</a>\n                </div>                \n                <uip-tooltip :message="strings.newVersion" :delay="200">\n                  <div class="uip-background-orange-wash uip-border-round uip-text-s uip-border-round uip-line-height-1 uip-padding-xxs uip-flex uip-flex-row uip-gap-xxxs uip-text-muted">\n                    <span class="uip-icon">upgrade</span>\n                    <span>{{item.update.new_version}}</span>\n                  </div>\n                </uip-tooltip>\n                \n              </div>              \n              <template v-if="item.open">\n              \n                <div class="uip-text-muted uip-text-s uip-scale-in-center" v-html="item.Description">\n                </div>\n                \n                \n                \n                <div class="uip-flex uip-flex-row uip-flex-center uip-gap-xs uip-scale-in-center">\n                  <div class="">\n                    <uip-save-button :saving="item.loading" size="small"\n                    :saveFunction="updatePlugin" :saveArg="[item, index]" :buttonText="strings.update">\n                    </uip-save-button>\n                  </div>\n                  \n                  <div class="">\n                    <a :href="item.update.url" target="_BLANK" class="uip-button-default uip-flex uip-gap-xxs uip-no-underline uip-background-grey uip-link-default">\n                    <span class=" uip-text-s uip-line-height-1">{{strings.details}}</span>\n                    </a>\n                  </div>\n                </div>\n                \n                <div v-if="wpVersion > item.update.tested" class="uip-background-orange-wash uip-padding-xs uip-border-round uip-scale-in-center">\n                  <div class="uip-text-bold">{{strings.watchOut}}</div>\n                  <div class="uip-text-muted uip-text-s">{{strings.watchOutDescription}}</div>\n                </div>\n              \n              </template>\n              \n            </div>\n          \n          </TransitionGroup>\n          \n          \n        </div>\n      </div>'}};