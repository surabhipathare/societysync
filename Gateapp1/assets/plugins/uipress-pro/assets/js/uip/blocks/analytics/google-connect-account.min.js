const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{inject:["uipData","uipress","uiTemplate"],props:{translations:Object,success:Function},data:function(){return{googliconNoHover:uipProPath+"assets/img/ga_btn_light.png",googliconHover:uipProPath+"assets/img/ga_btn_dark.png",hover:!1}},mounted:function(){},computed:{returnHoverImg(){return this.googliconHover},returnNoHoverImg(){return this.googliconNoHover},returnAccountOnUser(){return void 0!==this.uiTemplate.globalSettings.options&&("analytics"in this.uiTemplate.globalSettings.options&&"saveAccountToUser"in this.uiTemplate.globalSettings.options.analytics&&this.uiTemplate.globalSettings.options.analytics.saveAccountToUser)}},methods:{gauthWindow(){let t=this;var e=window.outerHeight/2+window.screenY-300,o=window.outerWidth/2+window.screenX-225,i=window.open("https://accounts.google.com/o/oauth2/auth/oauthchooseaccount?response_type=code&client_id=285756954789-dp7lc40aqvjpa4jcqnfihcke3o43hmt1.apps.googleusercontent.com&redirect_uri=https://analytics.uipress.co&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics.readonly&access_type=offline&approval_prompt=force&flowName=GeneralOAuthFlow","name","height=600,width=450,top="+e+", left="+o);window.focus&&i.focus(),window.onmessage=function(e){if("https://analytics.uipress.co"==e.origin&&e.data)try{var o=JSON.parse(e.data);o.code&&o.view&&(i.close(),t.uip_save_analytics(o))}catch(t){}}},uip_save_analytics(t){let e=this;if(!("view"in t&&"code"in t))return void e.uipress.notify(__("Connection failed","uipress-pro"),__("Incorrect credentials returned from account. Please try again","uipress-pro"),"error",!0);let o=new FormData;o.append("action","uip_save_google_analytics"),o.append("security",uip_ajax.security),o.append("analytics",JSON.stringify(t)),o.append("saveAccountToUser",e.returnAccountOnUser),e.uipress.callServer(uip_ajax.ajax_url,o).then(t=>{t.error?e.uipress.notify(__("Unable to save account","uipress-pro"),t.message,"error",!0):e.success()})},returnStyle:t=>t?"opacity:1":"opacity:0"},template:'\n\t\t<a @mouseenter="hover = true" @mouseleave="hover = false" class="uip-position-relative uip-cursor-pointer" @click="gauthWindow()" style="width:120px;height:26px">\n\t\t\t<img width="120"  :src="returnNoHoverImg">\n\t\t\t<img width="120" class="uip-position-absolute uip-left-0" :style="returnStyle(hover)" :src="returnHoverImg">\n\t\t</a>'}};